<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meet the Cast</title>
  <meta name="description" content="Figuren sind für Katja Kobusch viel mehr als nur Worte auf Papier.">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="assets/images/apple-touch-icon.png">
  <link rel="icon" href="assets/images/favicon.png" type="image/png">
  <link rel="stylesheet" href="assets/css/styles.css?v=124">
  <script data-goatcounter="https://katjakobusch.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>
</head>

<body class="crew">

  <!-- Home (bleibt) -->
  <a href="index.html" class="home-link">Home</a>

  <!-- Header mit Mauerbild + Titel + Filter -->
  <header class="crew-hero" role="banner" aria-label="Seitenkopf">
    <div class="crew-hero__inner">
      <h1 class="crew-hero__title">MEET THE CAST</h1>

      <div class="crew-filters" role="group" aria-label="Bücher filtern">
        <button id="btn-jake" class="filter-btn" data-book="jake" aria-pressed="true">
          Jake &amp; the City <span class="count" aria-hidden="true">(0)</span>
        </button>
        <button id="btn-echo" class="filter-btn" data-book="echo" aria-pressed="true">
          Echo &amp; Ember <span class="count" aria-hidden="true">(0)</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Dünner grüner Trenner -->
  <div class="crew-separator" aria-hidden="true"></div>

  <!-- „Korkwand“ im grünen Rahmen -->
  <main class="crew-frame" role="main">
    <section class="board" aria-label="Cast">

      <!-- Deine Polaroids unverändert, nur data-books ist schon drin -->
      <!-- 1 Jake -->
      <article class="card rot--2" data-books="jake,echo">
        <button class="card__inner" aria-expanded="false" aria-label="Steckbrief Jake umdrehen">
          <span class="pin" aria-hidden="true"></span>
          <div class="card__face card__front">
            <img src="assets/images/JakeDekker_Polaroid.jpg" alt="Jake">
          </div>
          <div class="card__face card__back">
            <div class="steckbrief">
              <h3>Jake</h3>
              <p><strong>Markenzeichen:</strong> Grüne Beanie, Moody-Vibes</p>
              <p><strong>Nie ohne:</strong> Queen Faye und Kaffee</p>
              <p><strong>Fun Fact:</strong> Liebt nicht nur Marvel, sondern auch Disney-Filme</p>
              <p><strong>Wäre für einen Tag gerne ...</strong> mit Jimi Hendrix im Tonstudio</p>
            </div>
          </div>
        </button>
      </article>

      <!-- 2 Sam -->
      <article class="card rot-1" data-books="jake,echo">
        <button class="card__inner" aria-expanded="false" aria-label="Steckbrief Sam umdrehen">
          <span class="pin" aria-hidden="true"></span>
          <div class="card__face card__front">
            <img src="assets/images/SamTurner_Polaroid.jpg" alt="Sam">
          </div>
          <div class="card__face card__back">
            <div class="steckbrief">
              <h3>Sam</h3>
              <p><strong>Markenzeichen:</strong> Seine ruhige Ausstrahlung</p>
              <p><strong>Nie ohne:</strong> Lieblingsplektrum (sieht aus wie Nordlichter)</p>
              <p><strong>Fun Fact:</strong> War mit Jake auf der deutschen Middle School</p>
              <p><strong>Wäre für einen Tag gerne ...</strong> im Weltall</p>
            </div>
          </div>
        </button>
      </article>

      <!-- ... ALLE WEITEREN Polaroids UNVERÄNDERT lassen ... -->
      <!-- (dein kompletter Artikel-Block von oben hier hinein) -->

      <article class="card rot-3" data-books="jake,echo">
        <button class="card__inner" aria-expanded="false" aria-label="Steckbrief Lilly umdrehen">
          <span class="pin" aria-hidden="true"></span>
          <div class="card__face card__front">
            <img src="assets/images/LillyTurner_Polaroid.jpg" alt="Lilly">
          </div>
          <div class="card__face card__back">
            <div class="steckbrief">
              <h3>Lilly</h3>
              <p><strong>Markenzeichen:</strong> Zöpfchen & Zahnlücken</p>
              <p><strong>Nie ohne:</strong> Kuschelhase "Herbert Hops"</p>
              <p><strong>Fun Fact:</strong> Kann auf Kommando weinen</p>
              <p><strong>Wäre für einen Tag gerne ...</strong> älter, damit Jake sie wahrnimmt</p>
            </div>
          </div>
        </button>
      </article>

    </section>
  </main>

  <footer>
    <p>
      <a href="index.html">Startseite</a> |
      <a href="impressum.html">Impressum</a> |
      <a href="datenschutz.html">Datenschutz</a>
    </p>
  </footer>

  <script>
    // Flip-Mechanik (wie gehabt)
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.card__inner');
      if (!btn) return;
      btn.setAttribute('aria-expanded',
        btn.getAttribute('aria-expanded') === 'true' ? 'false' : 'true'
      );
    });

    // --- Filter-Logik mit URL-Preselect + Zählanzeigen ---------------------
    const cards = Array.from(document.querySelectorAll('.card'));
    const btnJake = document.getElementById('btn-jake');
    const btnEcho = document.getElementById('btn-echo');
    const buttons = [btnJake, btnEcho];

    // aktive Bücher lesen/schreiben
    const active = new Set();

    function setPressed(button, on){
      button.setAttribute('aria-pressed', on ? 'true' : 'false');
      button.classList.toggle('is-on', on);
    }

    function initFromURL(){
      // ?books=jake  |  ?books=echo  |  ?books=both
      const p = new URLSearchParams(location.search);
      const v = (p.get('books') || '').toLowerCase();
      if (v === 'jake'){ active.add('jake'); }
      else if (v === 'echo'){ active.add('echo'); }
      else { active.add('jake'); active.add('echo'); } // Default: beide
      setPressed(btnJake, active.has('jake'));
      setPressed(btnEcho, active.has('echo'));
    }

    function applyFilter(){
      // Falls alles abgewählt -> wieder beide aktiv (nie „leer“)
      if (active.size === 0){ active.add('jake'); active.add('echo'); setPressed(btnJake,true); setPressed(btnEcho,true); }

      cards.forEach(card => {
        const books = card.dataset.books.split(',').map(s => s.trim());
        const show = books.some(b => active.has(b));
        card.toggleAttribute('hidden', !show);
      });
      updateCounts();
    }

    function updateCounts(){
      // sichtbare Karten zählen
      const visible = cards.filter(c => !c.hasAttribute('hidden'));
      const countJake = visible.filter(c => c.dataset.books.includes('jake')).length;
      const countEcho = visible.filter(c => c.dataset.books.includes('echo')).length;
      btnJake.querySelector('.count').textContent = `(${countJake})`;
      btnEcho.querySelector('.count').textContent = `(${countEcho})`;
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const key = btn.dataset.book;
        const nowOn = btn.getAttribute('aria-pressed') !== 'true';
        setPressed(btn, nowOn);
        if (nowOn) active.add(key); else active.delete(key);
        applyFilter();
        // URL aktualisieren (ohne Reload)
        const s = new URLSearchParams(location.search);
        s.set('books', active.size===2 ? 'both' : [...active][0]);
        history.replaceState(null, '', `${location.pathname}?${s}`);
      });
    });

    initFromURL();
    applyFilter();
  </script>
</body>
</html>
